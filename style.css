/* Highlight clickable tag spans on hover */
.highlight-country:hover,
.highlight-cause:hover,
.highlight-protest:hover,
.highlight-timeframe:hover {
    background: #ff9;
    color: #1a202c;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.2s, color 0.2s;
}
/* --- Global Reset & Minimal Aesthetic --- */
:root {
    /* site-wide gutter (used for page margins and paddings). Desktop override applied via media query below */
    --site-gutter: 10px;
    /* site background color used across components */
    --site-bg: #f0f0f0;
    /* metadata column width (used to offset content when split) */
    --metadata-width: 220px;
    /* when the page enters split mode (context panel opens) this value will be used
       to shrink the metadata column — change this to give the left column more room */
    --metadata-width-collapsed: 160px;
    /* content gutter used when calculating available content width */
    --content-gutter: 24px;
    /* offset to keep fixed global controls (like the Back button) from overlapping content */
    --global-back-offset: 56px;

    /* (hero variables removed) */
}

/* Hero-mode styles
    Minimal rules to support the JS hero lifecycle (hero-init -> hero-active -> hero-revealed).
    These keep the description/content hidden while the page is in hero mode and
    animate it in when the hero is revealed. Durations match the JS transitions (1000ms).
*/

/* Hide the main description column during initial hero states so only the
    image/title are visible. Also prevent pointer events while hidden. */
body.hero-init .description-block,
body.hero-active .description-block {
     opacity: 0;
     transform: translateY(12px);
     pointer-events: none;
     transition: opacity 360ms ease, transform 360ms ease;
}

/* When the hero has finished revealing, animate the description into place.
    Use a slightly longer easing to match the shared-element timing. */
body.hero-revealed .description-block {
     opacity: 1;
     transform: translateY(0);
     pointer-events: auto;
     transition: opacity 1000ms cubic-bezier(.2,.9,.2,1), transform 1000ms cubic-bezier(.2,.9,.2,1);
}

/* Also ensure the content column as a whole remains visually hidden during hero */
body.hero-init .content-column,
body.hero-active .content-column {
     visibility: visible; /* keep scrolling behavior intact, only collapse description */
}

/* End hero-mode additions */

@media (min-width: 900px) {
    :root { --site-gutter: 10px; }
}

/* Dev helper: show column names when body has .show-column-names */
.show-column-names [data-column-name] { position: relative; }
.show-column-names [data-column-name]::before {
    content: attr(data-column-name);
    position: absolute;
    top: 8px;
    left: 8px;
    background: rgba(0,0,0,0.75);
    color: #fff;
    padding: 4px 8px;
    font-size: 12px;
    border-radius: 4px;
    z-index: 99999;
    pointer-events: none;
}

body {
    background-color: #f0f0f0; /* Off-white/light gray background */
    color: #000000;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Lekton-Regular', sans-serif;
    font-size: 20px;
    line-height: 1.3;
}


/* --- Split-Screen Layout (Desktop View) --- */

.split-layout {
    display: flex;
    max-width: 1400px;
    margin: 0 auto;
    min-height: 100vh;
    width: 100%;
}

/* Prevent the global fixed back button from overlapping the page content by
   adding top padding to the main container. This keeps the columns pushed
   down while the back button remains fixed above them. */

#object-container { padding-top: var(--global-back-offset); }
 
 /* #object-container { padding-top: 18px; }*/

.split-layout.split {
    max-width: 100vw;
    width: 100vw;
    margin: 0;
}

/* Ensure content column lays out horizontally when split is active */
.split-layout.split .content-column {
    flex-direction: row;
}

/* Use the parent .split flag to size the context panel on desktop */
.split-layout.split #context-panel {
    flex: 0 0 65%;
    width: 65%;
    border-left: 1px solid #000;
    padding: 30px;
}

/* When a context panel is open, let the description take more room (80%) so it doesn't
   shrink excessively — this keeps the reading column comfortable while the panel sits
   at the right. */
.split-layout.split #description-text {
    flex: 0 0 90%;
    width: 90%;
    padding-right: 20px;
}

.split-layout.split #context-panel {
    flex: 0 0 50%;
    width: 50%;
    border-left: 1px solid #000;
    padding: 30px;
}

.metadata-column {
    /* Sidebar visually simplified: keep content but present only a thin vertical
       divider line instead of a boxed panel. Increase width for clearer visual
       hierarchy and give more room for the thumbnail + caption. */
    flex: 0 0 var(--metadata-width);
    min-width: 140px; /* don't let the sidebar collapse too far */
    max-width: 320px; /* reasonable upper bound */
    /* reduce left padding so content sits closer to the viewport edge */
    padding: 18px 12px 18px 12px;
    border-right: none;
    transition: flex 0.4s;
    /* Keep the metadata column visible while the middle column scrolls */
    position: -webkit-sticky; /* Safari */
    position: sticky;
    top: var(--global-back-offset);
    align-self: flex-start;
    height: 100vh; /* fill viewport height so it doesn't scroll away */
    overflow: auto; /* allow internal scrolling if metadata content is long */
}

/* (previous hero enter/exit animation rules removed) */

/* Global back button (positioned above the columns) */
#global-back-wrap { position: relative; z-index: 1100; }
#back-button {
    all: unset; /* reset default button visuals so we can style consistently */
    display: inline-block;
    box-sizing: border-box;
    padding: 6px 10px;
    color: rgba(0,0,0,0.4); /* black at 40% opacity for text */
    background: transparent;
    cursor: pointer;
    font-family: 'Lekton-Bold', 'Lekton-Regular', sans-serif; /* prefer Bold file if available */
    font-size: 20px;
    line-height: 1;
    text-decoration: none;
    position: fixed; /* keep above all content */
    top: 12px;
    left: 12px;
    z-index: 1200;
}
#back-button:focus {
    outline: 2px solid rgba(0,0,0,0.12);
    outline-offset: 2px;
}
#back-button:hover { color: rgba(0,0,0,0.65); }

/* Draw a thin vertical line at the right edge of the metadata column instead of a boxed border */
.metadata-column {
    background: transparent;
}
.metadata-column::after {
    content: '';
    position: absolute;
    right: 6px;  /*nudge slightly inward from the very edge */
    top: 12px;
    bottom: 12px;
    width: 1px;
    background: rgba(0,0,0,0.85);
    pointer-events: none;
}

/* Hide the meta/content divider — we'll rely on the content-side rule for
   subsection markers instead. */
.metadata-column::after { display: none !important; }


.split-layout.split .metadata-column {
    /* Make metadata column completely fixed in the viewport when split layout is active */
    position: fixed;
    left: 0;
    top: var(--global-back-offset);
    bottom: 0;
    z-index: 60;
    flex: 0 0 var(--metadata-width);
    width: var(--metadata-width);
    overflow: auto; /* allow internal scroll if content is taller than viewport (safer than clipping) */
}

/* .split-layout.split #object-image {
    max-width: 160px;
    transition: max-width 0.4s, width 0.4s;
}*/

.content-column {
    flex: 1;
    display: flex;
    padding: 30px 30px;
    padding-right: 18%;
    /* Make the content column scroll independently so the left column can remain fixed */
    max-height: 100vh;
    overflow-y: auto;
    transition: flex 0.4s;
}

/* When the left metadata column is fixed, push the content to the right so it doesn't sit under it */
.split-layout.split .content-column {
    /* When metadata column is fixed we make the content column sit to the
       right of it and take the remaining width. This prevents an awkward
       centered gap on wide viewports and keeps the content flush next to
       the left column. */
    margin-left: var(--metadata-width);
    box-sizing: border-box;
    width: calc(100% - var(--metadata-width));
}

/* When the page is in split mode (context panel open), reduce the left column
   width so the center content has more room and nothing overlaps. Toggle is
   driven by the container (#object-container) having class "split". */
/* When the page is in split mode (context panel open), reduce the left column
   width so the center content has more room and nothing overlaps. Toggle is
   driven by the container (#object-container) having class "split". We use
   --metadata-width-collapsed so this is easy to tune in one place. */
#object-container.split {
    --metadata-width: var(--metadata-width-collapsed);
}

/* When using the split layout (fixed metadata column on the left), avoid making
   the gallery full-bleed so it doesn't overlap the fixed column. In that case
   the gallery will behave normally inside the content flow. */
.split-layout.split .photo-gallery {
    width: auto;
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
    box-sizing: border-box;
}

/* Subsection toggle: when a subsection is collapsed (aria-expanded="false")
   use the lighter display font so it visually differs from the open state. The
   open state (aria-expanded="true") keeps the existing styling. */
.subsection-toggle[aria-expanded="false"]{
    font-family: 'Blur Light', 'Blur Regular', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-weight: 400;
}

/* Also handle split mode when JS toggles the #object-container or #content-display
   elements to have class "split" (some pages use these IDs instead of .split-layout).
   This keeps the gallery from going full-bleed and makes the content-column sit
   flush next to the fixed metadata column. */
#object-container.split .photo-gallery,
#content-display.split .photo-gallery {
    width: auto;
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
    box-sizing: border-box;
}

/* Ensure content column shifts to the right of the fixed metadata column when
   either the .split-layout or the #object-container/#content-display split
   classes are used. This prevents the awkward left gap. */
.split-layout.split .content-column,
#object-container.split .content-column,
#content-display.split .content-column {
    margin-left: var(--metadata-width);
    box-sizing: border-box;
    width: calc(100% - var(--metadata-width));
}

/* Make metadata column fixed when split is active on #object-container or
   #content-display so behaviour matches .split-layout.split */
#object-container.split .metadata-column,
#content-display.split .metadata-column {
    position: fixed;
    left: 0;
    top: var(--global-back-offset);
    bottom: 0;
    z-index: 60;
    flex: 0 0 var(--metadata-width);
    width: var(--metadata-width);
    overflow: auto;
}

/* --- Image & Typography --- */
#object-image-wrapper {
    margin-bottom: 20px;
   /* border: 1px solid #000;*/
}
#object-image {
    width: 100%;
    display: block;
    height: auto;
    /* Image is statically positioned for the simplified hero view. */
    transform-origin: top left;
}

/* Small metadata block under the object image (Object Type / Timeframe) */
#static-tags {
    font-size: 1rem; /* ~17px when base is 20px */
    color: #222;
    margin-top: 6px;
}
#static-tags p {
    margin: 4px 0;
    line-height: 1.2;
    font-weight: 400;
}
#static-tags p strong {
    font-weight: 600; /* keep label readable */
    margin-right: 6px;
    font-size: 0.9em;
}
#static-tags span {
    color: #111;
    font-size: 0.9 em;
}

/* Slightly smaller when the left metadata column collapses */
#object-container.split #static-tags,
.split-layout.split #static-tags {
    font-size: 0.8rem;
}

/* Photo gallery (thumbnails) styles — CSS Grid based masonry with JS row-span
   calculation. Grid gives consistent gaps and responsive column control. */
.photo-gallery {
    margin-top: 30px;
    --gallery-cols: 4; /* default: 4 columns on wide/fullscreen */
    display: grid;
    grid-template-columns: repeat(var(--gallery-cols), 1fr);
    grid-auto-rows: auto; /* rows size to content so items do not span multiple rows */
    gap: 15px; /* consistent gap between images (user requested 15px) */
    width: 100%;
    box-sizing: border-box;
    padding: 20px 24px; /* internal gutters so thumbnails don't touch the edge */
    background: transparent;
}

/* List view cards should not inherit gallery animation styles. The gallery
   uses generic .card rules for animation (opacity:0, transforms). Ensure
   list view cards are fully visible and not animated by those rules. */
#list-view .card,
.list-card {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
}

/* Responsive adjustments: reduce the column count at narrower breakpoints */
@media (max-width: 1400px) { .photo-gallery { --gallery-cols: 4; } }
@media (max-width: 1200px) { .photo-gallery { --gallery-cols: 4; } }
@media (max-width: 980px)  { .photo-gallery { --gallery-cols: 3; } }
@media (max-width: 700px)  { .photo-gallery { --gallery-cols: 2; } }

/* When a split/context panel is opened we reduce the number of columns */
.split-layout.split .photo-gallery,
#content-display.split .photo-gallery,
#object-container.split .photo-gallery {
    --gallery-cols: 3;
    width: auto; /* allow gallery to fit into the content column */
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
    box-sizing: border-box;
}

.photo-gallery .thumb-wrapper {
    /* Each grid cell; we use flex to bottom-align the image inside the cell */
    display: flex;
    align-items: flex-end; /* ensures image bottoms align inside their grid cell */
    overflow: hidden;
    border-radius: 2px;
    box-sizing: border-box;
    align-self: end; /* anchor the grid item to the bottom of its grid area */
}

.photo-gallery .thumb {
    width: 100%;
    height: auto; /* preserve aspect ratio */
    display: block;
    cursor: pointer;
    border: 1px solid rgba(0,0,0,0.06);
    transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
    object-fit: cover;
    box-sizing: border-box;
}

/* Results grid (masonry) — same-width columns, varying heights based on image aspect ratio */
.results-grid {
    --results-cols: 6;
    column-count: var(--results-cols);
    column-gap: 12px;
    padding: 8px 10px;
    box-sizing: border-box;
    width: 100%;
}
.result-item-grid {
    display: inline-block;
    width: 100%;
    margin: 0 0 12px 0;
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
    box-sizing: border-box;
    overflow: hidden;
    border-radius: 2px;
}
.result-item-grid img { width:100%; height:auto; display:block; background:#efefef; }

@media (max-width: 1400px) { .results-grid { --results-cols: 5; } }
@media (max-width: 1200px) { .results-grid { --results-cols: 4; } }
@media (max-width: 980px)  { .results-grid { --results-cols: 3; } }
@media (max-width: 700px)  { .results-grid { --results-cols: 2; } }
@media (max-width: 420px)  { .results-grid { --results-cols: 1; } }
.photo-gallery .thumb:hover {
    /* Make the thumbnail and its frame grow slightly on hover (picture + frame) */
    transform: scale(1.06);
    box-shadow: 0 12px 28px rgba(0,0,0,0.14);
    border-color: rgba(0,0,0,0.16);
}

/* Apply a unified hover effect for grid/list thumbnails and search results.
   Only enable on hover-capable input devices to avoid interfering with touch UX. */
@media (hover: hover) and (pointer: fine) {
    .result-item-grid,
    .result-item,
    .photo-gallery .thumb,
    .result-thumb {
        transition: transform 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
        transform-origin: center top;
        will-change: transform;
        position: relative;
    }

    /* Scale the containing frame/box so the whole frame + image get larger */
    .result-item-grid:hover,
    .result-item:hover,
    .photo-gallery .thumb:hover,
    .result-thumb:hover {
        transform: scale(1.06);
        z-index: 40; /* lift above neighbours so the scale doesn't clip */
        box-shadow: 0 18px 40px rgba(0,0,0,0.18);
        border-color: rgba(0,0,0,0.14);
    }

    /* Slight image zoom inside the frame for added punch (keeps aspect ratio) */
    .result-item-grid img,
    .result-item img,
    .photo-gallery .thumb,
    .result-thumb {
        transition: transform 260ms ease;
        display: block;
        backface-visibility: hidden;
    }
    .result-item-grid:hover img,
    .result-item:hover img,
    .photo-gallery .thumb:hover,
    .result-thumb:hover {
        transform: scale(1.02);
    }
}

/* Thumbnail wrapper and play overlay for video/embed thumbnails */
.thumb-wrapper {
    position: relative;
    display: block;
}
.thumb-wrapper .thumb {
    display: block;
}
.play-icon {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 44px;
    height: 44px;
    border-radius: 50%;
        background: rgba(0,0,0,0.6);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        pointer-events: none;
}
.lightbox-media iframe {
    width: 90vw;
    height: 60vh;
}
.lightbox-media video {
    width: auto;
        /* transform removed: JS-driven translate/scale is disabled in CSS per user request */
    max-height: 80vh;
}
.photo-gallery .thumb.selected {
    border-color: #000;
}

/* Ensure description and gallery stack vertically within the content column */
.description-block {
    display: flex;
    flex-direction: column;
    width: 100%;
    flex: 1 1 auto; /* allow it to grow to fill available content-column space */
    max-width: 900px; /* keep measure comfortable for long-form reading */
    margin: 0 auto;
}

/* Subsection titles and dividers inside the description column */
.subsection { margin: 0; }
.subsection-title {
    font-family: 'Blur Medium', sans-serif;
    font-size: 1.6em;
    justify-content: left;
    letter-spacing: 0.6px;
    margin: 0;
    text-transform: none;
}
.divider {
    height: 3px;
    background: #000;
    /* remove extra margins so subsections sit flush */
    margin: 0;
}

#object-title {
    font-family: 'Blur Light', sans-serif;
    /* responsive title size so it scales but stays bounded */
    font-size: clamp(20px, 3.5vw, 40px);
    line-height: 1.05;
    margin: 8px 0 12px 0;
    letter-spacing: -1px;
    word-break: break-word;
    overflow-wrap: break-word;
    white-space: normal;
}

/* Title styling (scrollytelling transforms removed). Keep transform origin set for
   any small, safe transform-only effects; avoid advertising layout-related
   will-change entries here. */
#object-title {
    transform-origin: top left;
    will-change: auto;
}

/* Ensure image/title don't pick up unexpected transitions elsewhere */
#object-image,
#object-title {
    transition: none !important;
    will-change: auto !important;
}

/* Hero-mode removed: keep the layout in the standard three-column state by default.
   The three columns are: metadata-column (left), content-column (center), and
   the context panel (right, hidden until activated). */

/* Smooth transition when leaving hero mode: fade in content column */
.content-column { transition: opacity 360ms ease, transform 360ms ease; }
.content-column.hidden-by-hero { opacity: 0; pointer-events: none; }

/* Align object title with the Description subsection toggle when the
   layout shows the left metadata column and the content column side-by-side.
   The content column uses 30px top padding; the metadata column uses 18px, so
   increase the title's top margin slightly in split mode so it lines up with
   the Description button. This only applies when the container has the
   "split" class (two-column layout). */
.split-layout.split #object-title,
#object-container.split #object-title {
    margin-top: 12px; /* tuned to visually align with .subsection-toggle */
}

/* When the layout shows columns side-by-side, nudge the description column
   so the first subsection lines up vertically with the object title. This
   keeps the Description toggle and object title at the same height. */
.split-layout.split .description-block,
#object-container.split .description-block,
#content-display.split .description-block {
    /* Remove extra top padding so the first subsection lines up with
       the object title (object title uses its own top margin in split mode).
       Content column already provides top padding; zero here ensures
       vertical alignment between columns. */
    padding-top: 0;
    box-sizing: border-box;
}

/* Smaller title when left metadata column collapses in split mode */
#object-container.split .metadata-column #object-title {
    font-size: clamp(16px, 3.2vw, 28px);
    line-height: 1.02;
}

#object-image-wrapper img {
    display: block;
    
}

#description-text {
    font-size: 18px;
    line-height: 1.2;
    color: #111;
    text-align: left;
}
.eyewitness-contents, .sources-contents {
    font-size: 0.95em;
    color: #111;
}

/* Collapsible subsection body styles */
.subsection .subsection-body {
    overflow: hidden;
    max-height: 2000px; /* large default to allow content; JS will set explicit heights for transitions */
    transition: max-height 280ms ease, opacity 220ms ease, padding 220ms ease;
    opacity: 1;
}
.subsection.collapsed .subsection-body {
    max-height: 0 !important;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
}

/* Sticky stacking behaviour: make each .subsection act as a sticky unit
   (header + body) so later sections scroll over earlier ones. We add
   increasing z-index in DOM order so the following section covers the
   previous one. If a subsection body is taller than available viewport
   space, JS will add .non-sticky to disable sticky positioning so the
   full contents can be scrolled into view. */
.description-block .subsection {
    position: -webkit-sticky; /* Safari */
    position: sticky;
    /*top: calc(var(--global-back-offset, 56px));*/
    z-index: 10; /* base z-index; increased per-order below */
    /* use site background so header and body read as one flat plane */
    background: var(--site-bg);
    padding-top: 0;
    padding-bottom: 0;
}
.description-block .subsection .subsection-title,
.description-block .subsection .subsection-toggle {
    background: var(--site-bg);
}
.description-block .subsection .subsection-body {
    background: var(--site-bg);
    padding: 0; /* remove internal vertical padding so sections sit flush */
}
/* increase stacking order so later sections cover earlier ones */
.description-block .subsection:nth-of-type(1){ z-index: 10; }
.description-block .subsection:nth-of-type(2){ z-index: 20; }
.description-block .subsection:nth-of-type(3){ z-index: 30; }
.description-block .subsection:nth-of-type(4){ z-index: 40; }
.description-block .subsection:nth-of-type(5){ z-index: 50; }

/* Non-sticky fallback (applied by JS when subsection body is too tall) */
.description-block .subsection.non-sticky{
    position: static !important;
}

/* Ensure collapsed subsections are not sticky (they should take no space).
    Use position: relative rather than static so the subsection's ::before
    pseudo-element (the horizontal tick) remains positioned relative to the
    subsection. Setting to `relative` still disables sticky positioning while
    preserving the local positioning context for the tick. */
.description-block .subsection.collapsed{ position: relative; }

/* When a subsection is collapsed, the rotated/absolutely-positioned label
   must reflow so collapsed labels/toggles stack vertically instead of
   overlapping other labels. Make the title and the toggle participate in
   normal flow and remove the rotation/offsets. This keeps collapsed
   toggles stacked one-after-another in the left label column. */
.description-block .subsection.collapsed .subsection-title {
    /* keep the title in-flow (occupies the left label column) so collapsed
       subsections stack. Use flex centering so rotated toggle aligns nicely. */
    
    position: static !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    width: var(--section-label-width);
    padding-top: calc(var(--section-label-collapsed-height) / 2);
    padding-bottom: calc(var(--section-label-collapsed-height) * 2);
    min-height: var(--section-label-collapsed-height);
    box-sizing: border-box;
}

.description-block .subsection.collapsed .subsection-toggle {
    /* Keep the visual rotation but allow the toggle to participate in
       normal flow. The transform rotates the label while the container
       (title) provides the column footprint so multiple collapsed toggles
       stack without overlapping. */
    position: static !important;
    display: inline-block !important;
    transform: translateX(-40%) rotate(90deg) !important;
    transform-origin: center center !important;
    writing-mode: horizontal-tb;
    white-space: nowrap;
    margin: 0;
    padding: 0;
    text-align: center;
    font-family: 'Blur Light', 'Blur Regular', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-weight: 400;
}

/* Toggle button inside subsection title */
.subsection-toggle {
    all: unset;
    font: inherit;
    color: inherit;
    display: inline-block;
    width: 100%;
    text-align: left;
    padding: 4px 2px;
}
.subsection-toggle:focus {
    outline: 1px solid #000;
    outline-offset: 2px;
}
 /* .subsection-title .subsection-toggle::after {
    /* Default plus/minus marker (hidden in our rotated-label layout) */
/*    content: '−';
    float: right;
    font-weight: 700;
    transition: transform 220ms ease, content 120ms ease; 
}
.subsection.collapsed .subsection-title .subsection-toggle::after {
    content: '+';
} */

/* Hide metadata divider (we'll place the line with subsections instead) */
.metadata-column::after { display: none !important; }

/* Remove visual plus/minus marker when using rotated labels */
.subsection-title .subsection-toggle::after,
.description-block .subsection .subsection-toggle::after {
    display: none !important;
    content: none !important;
}

/* Remove horizontal divider element used previously between subsection headers */
.divider { display: none !important; }

/* Desktop layout: left label column with rotated horizontal text reading top->bottom */
@media (min-width: 900px) {
    /* Width reserved for rotated labels and offset for the guide line */
    :root {
        /* Make label column responsive and narrower: min 48px up to 80px depending on viewport.
           This reduces the horizontal footprint of rotated labels while remaining responsive. */
        --section-label-width: clamp(20px, 2.34vw, 45px);
        /* reduce distance from guide to label for a tighter visual relationship */
        --label-line-offset: 12px; /* ~12px gap (smaller) */
        --tick-length: 16px; /* shorter connector length to match reduced gap */
        /* font size for rotated subsection labels (responsive) */
        --section-label-font-size: clamp(0.85rem, 1.6vw, 1.15rem);
        --section-label-collapsed-height: 30px;
    }

    .description-block { position: relative; }

    /* Vertical guide line anchored to the description block (option 2).
       It spans the full height of .description-block so it grows/shrinks
       with the content when subsections open/close. */
    .description-block::before {
        content: '';
        position: absolute;
        /* place the guide to the left of the label column by shifting
           it left by --label-line-offset (so it sits outside the label column)
           This keeps the vertical line visually to the left of the subsection buttons. */
        left: calc(0px - var(--label-line-offset));
        top: 0;
        bottom: 0;
        width: 2px;
        background: rgba(0,0,0,0.85);
        pointer-events: none;
        /* raise above subsection backgrounds so the guide is visible */
        /* Increased so the vertical guide sits above rotated labels when collapsed */
        z-index: 80;
    }
 /* short horizontal divider (tick) connecting the left guide to the content */
    .description-block .subsection::before {
        content: '';
        position: absolute;
        /* align tick start with the vertical guide (same left origin) */
        left: calc(0px - var(--label-line-offset));
        /* align vertically with the top of the subsection body/title area */
        top: 0;
        height: 3px;                /* thickness of the tick */
        width: 20px;                /* length (tune to taste) */
        background: rgba(0,0,0,0.85);
        /* raise tick above subsection background and above toggles so it remains visible */
        z-index: 85;
        pointer-events: none;
    }

    /* keep tick visible for collapsed subsections so the guide/tick remains
       above stacked rotated toggles (user requested ticks remain visible) */
    .description-block .subsection.collapsed::before {
        display: block;
    }

    /* if you want the tick to sit a few px lower (matching visual baseline),
       tweak top (example: top: 6px;) */
    /* .description-block .subsection::before { top: 6px; } */

    .description-block .subsection {
        display: grid;
        grid-template-columns: var(--section-label-width) 1fr;
        /* single row grid so the body can sit at the top; title will be
           absolutely positioned into the left column so it doesn't create
           vertical space above the body */
        grid-template-rows: 1fr;
        gap: 0;
        align-items: start;
          /* remove vertical padding so the subsection-body can start at the
              very top of .description-block */
          padding: 0;
        background: var(--site-bg);
        position: relative; /* needed so subsection::after positions relative to header block */
    }

    .description-block .subsection .subsection-title {
        /* place the title absolutely in the left column so it doesn't
           take up vertical space; this allows the subsection-body to
           start at the very top of the subsection */
        grid-column: 1 / 2;
        position: absolute;
        left: 0;
        top: 0;
        bottom: auto;
        width: var(--section-label-width);
        display: flex;
        align-items: flex-start;
        /* center rotated label horizontally within the title column */
        justify-content: center;
        padding: 0;
    }

     .description-block .subsection .subsection-toggle {
         
          position: absolute;
          left: 40%;                 /* center horizontally within label column */
          top: 1.5em;                  /* small nudge from top; tune (6-12px) to match baseline */
          transform-origin: center top;
          /* translate in normal axes, then rotate so translations are not affected
              by the rotation (keeps placement consistent across subsections) */
          transform: translateX(-50%) rotate(90deg);
          writing-mode: horizontal-tb;
          white-space: nowrap;
          cursor: pointer;
          font-family: 'Blur Medium', sans-serif;
          font-size: var(--section-label-font-size);
          letter-spacing: 0.4px;
          margin: 0;
          padding: 0;
          line-height: 1;
          z-index: 70; /* keep above guide/ticks */
          display: inline-block;
          
     }

    .description-block .subsection .subsection-body {
        /* occupy the primary grid cell at the top so the content begins
           at the top of the description-block */
        grid-column: 2 / -1;
        grid-row: 1 / 2;
        padding-left: 18px;
        margin-top: 0;
    }

    /* Normalize first-child spacing so different subsection bodies don't
       start at different vertical offsets (prevents headings/images/etc.
       from pushing the visual start down). This enforces a consistent
       baseline across subsections on desktop split layouts. */
    .description-block .subsection .subsection-body > *:first-child {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }

    /* remove horizontal tick connectors at each subsection header */
    .description-block .subsection::after {
        display: none !important;
        content: none !important;
    }

    /* Move the content column up on desktop split layouts so description
       aligns with the object title and the top gutter from .content-column
       doesn't push subsections down. This only affects wide viewports. */
    .split-layout.split .content-column {
        padding-top: 0;
    }
}

/* Make sure the gallery sits below the description even when split layout is active */
#content-display.split .description-block,
.split-layout.split .description-block {
    width: 100%;
}

/* Lightbox (modal) styles for gallery previews */
.lightbox {
    position: fixed;
    inset: 0;
    display: none; /* hidden by default */
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
.lightbox.active {
    display: flex;
}
.lightbox-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(2px);
}
.lightbox-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    
    box-sizing: border-box;
    z-index: 1010;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}
.lightbox-content img {
    max-width: 100%;
    max-height: 80vh;
    object-fit: contain;
    display: block;
    /* remove white border so images don't appear framed */
    border: none;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    background: #000;
}
.lightbox-close {
    position: absolute;
    top: 8px;
    right: 8px;
    z-index: 1020;
    background: rgba(255, 255, 255, 0.315);
    border: 0;
    padding: 6px 10px;
    cursor: pointer;
    font-size: 18px;
}
.lightbox-caption {
    color: #ffffff;
    font-size: 14px;
    max-width: 90vw;
    text-align: center;
}

/* Nav buttons (prev/next) inside lightbox */
.lightbox-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 1020;
    background: rgba(255, 255, 255, 0.315);
    border: 0;
    width: 42px;
    height: 72px;
    font-size: 34px;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}
.lightbox-prev { left: 8px; }
.lightbox-next { right: 8px; }
.lightbox-nav:focus { outline: 2px solid #ffffff; }



h1, h2, h3, h4, h5, h6 {
    font-family: 'Blur Light', sans-serif;
}

h1 {
    font-size: 2.5em;
    margin-top: 0;
}

/* Responsive object title specifically for the left metadata column
   Uses clamp to scale with viewport while providing sensible min/max sizes.
   Also ensures the title wraps instead of overflowing when the column is narrow. */
.metadata-column h1 {
    /* increased by ~20% from previous values */
    font-size: clamp(22px, 3.84vw, 33.6px);
    line-height: 1.05;
    margin-top: 0;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    transition: font-size 0.18s ease;
}

.strong-emphasis {
    font-family: 'Blur medium', sans-serif;
    font-size: 20px;
}

.empasisc {
    font-family: 'Blur medium', sans-serif;
    font-size: 20px;
    text-decoration: underline;
    color: rgb(192, 14, 136);
}
/* --- Filter Buttons --- */
#filter-buttons-container {
    /* tighten vertical spacing around filter buttons so they sit closer to the divider */
    margin: 2px 0 12px 0;
}
.filter-button {
    background: transparent;
    -webkit-appearance: none;
    appearance: none;
    border: none; /* remove visible border */
    box-shadow: none;
    margin-right: 5px;
    margin-bottom: 5px;
    cursor: pointer;
    font-weight: bold;
    font-size: 0.56em;
    text-transform: uppercase;
    transition: background-color 0.2s, transform 0.12s;
}
.filter-button:hover {
    background-color: rgba(0,0,0,0.04); /* subtle hover */
    transform: translateY(-1px);
}

/* Remove Firefox inner focus border */
.filter-button::-moz-focus-inner { border: 0; padding: 0; }

/* Visible, accessible focus style */
.filter-button:focus {
    outline: 3px solid rgba(0,0,0,0.12);
    outline-offset: 2px;
}

/* --- Contextual Highlighting (The key CSS for your feature) --- */
.highlight-country.highlight-active,
.highlight-cause.highlight-active,
.highlight-protest.highlight-active,
.highlight-timeframe.highlight-active {
    background-color: #ff9; /* A soft, visible yellow for highlighting */
    padding: 1px 3px;
    transition: background-color 0.2s;
   
}

/* --- Dynamic Context Panel (The key for the Split-Screen feature) --- */

/* The main description article */
#description-text {
    flex-grow: 1; /* Takes up all available space by default */
    width: 100%; /* Default full width */
    transition: width 0.4s ease-in-out, flex-grow 0.4s ease-in-out;
    padding-right: 20px; /* Add some space before the panel opens */
}

/* The panel itself, initially hidden by taking no space */
#context-panel {
    flex: 0 0 0; /* Starts with zero width */
    width: 0; 
    background-color: #eee; 
    border-left: none; /* Initially no border */
    overflow: hidden; /* Hides content when width is 0 */
    transition: flex 0.4s ease-in-out, width 0.4s ease-in-out;
}

/* Helper class used in markup to ensure the panel is visually hidden
   before JS runs. The panel will open via the togglePanel() trigger. */
#context-panel.hidden-panel { display: none; }

/* Smooth width transition when panel switches between compact (list) and expanded (detail) */
#context-panel {
    transition: flex 260ms ease, width 260ms ease;
}

/* Compact: narrow panel for list view */
#content-display.split #context-panel.compact {
    flex: 0 0 28%;
    width: 28%;
}

/* Expanded: larger panel for detailed content */
#content-display.split #context-panel.expanded {
    flex: 0 0 65%;
    width: 65%;
}


/* Do NOT shrink description column when split is active */

/* Class added by JavaScript to activate the split screen */
/* Use flex layout: left metadata column stays as configured; inside content-display, description keeps its width and context-panel fills the rest */
#content-display { position: relative; display: flex; flex: 1 1 auto; width: 100%; }

/* When split is active, keep content area as row: description + context panel */
#content-display.split { display: flex; }

/* When layout is split, remove the large right padding on the content column so the context panel
    can use the full remaining width. This allows the #context-panel (flex:1) to expand to the edge. */
.split-layout.split .content-column { padding-right: 0; }

/* Keep the description block at a smaller size when the context panel opens so
    the right-hand panel fits in the viewport. Use a flexible split that gives the
    description comfortable reading width while allowing the context panel to occupy
    the remaining space. */
#content-display.split .description-block,
#content-display.split #description-text {
     /* Shrink description to the left so the context panel can be fully visible
         without horizontal scrolling. Adjust this percentage to taste (50-60%). */
     flex: 0 0 55%;
     max-width: 55%;
     padding-right: 20px;
     box-sizing: border-box;
}

/* Context panel should take the remaining width of the content area */
#content-display.split #context-panel {
    position: static;
    flex: 1 1 auto;
    width: auto;
    border-left: 1px solid #000;
    padding: 30px;
    box-sizing: border-box;
    overflow: auto;
}

/* --- Context Panel specific content --- */
#close-panel-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    background: transparent;
    border: 1px solid #000;
    cursor: pointer;
    padding: 5px 10px;
    font-size: 0.8em;
}
/* Hide close button by default; show only when panel is active */
#close-panel-btn { display: none; }

/* Show close button when context panel is active or when split layout is active */
#context-panel.active #close-panel-btn,
.split-layout.split #context-panel.active #close-panel-btn,
.split-layout.split #close-panel-btn {
    display: block;
}
#context-panel-content {
    margin-top: 20px; 
}

/* Inner layout for context panel: narrow list at left, detail at right */
.context-panel-layout {
    display: grid;
    grid-template-columns: 220px 1fr; /* left list narrow, right detail flexible */
    gap: 18px;
    align-items: start;
}
.context-panel-layout.no-detail {
    grid-template-columns: 220px 0; /* hide detail area until an item is selected */
}
.context-panel-list {
    border-right: 1px solid #e6e6e6;
    padding-right: 8px;
    max-height: calc(100vh - 220px);
    overflow: auto;
}
.context-panel-list .context-item {
    padding: 10px 6px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
}
.context-panel-list .context-item:hover,
.context-panel-list .context-item.active {
    background: #f7f7f7;
}
.context-panel-detail {
    padding-left: 8px;
    max-height: calc(100vh - 180px);
    overflow: auto;
    font-size: 1.05rem; /* slightly larger text for reading */
    line-height: 1.5;
}
.context-panel-detail h3 {
    margin-top: 0;
}


/* --- Responsive Layout (Crucial for mobile experience) --- */
@media (max-width: 900px) {
    .split-layout {
        flex-direction: column; 
    }
    .metadata-column {
        /* On small screens, revert sticky/fixed behavior so header stacks naturally */
        position: static;
        height: auto;
        flex: auto;
        border-right: none;
        border-bottom: 1px solid #000; 
    }
    .content-column {
        flex-direction: column; /* Stacks description and panel vertically on small screens */
    }

    /* On mobile, the panel stacks instead of splitting, taking full width */
    #content-display.split #description-text {
        width: 100%;
        flex: auto;
        padding-right: 0;
    }
    
    #context-panel {
        width: 100%;
        flex: 1 1 auto; /* Allows it to occupy space when active */
    }

    /* We can hide the description completely on mobile when context panel is open */
    #content-display.split #description-text {
        display: none;
    }

    #content-display.split #context-panel {
        padding: 30px;
        border-left: none;
        border-top: 1px solid #000;
    }

    /* Ensure fixed metadata column is disabled on small screens even when .split is present */
    .split-layout.split .metadata-column {
        position: static;
        width: auto;
        height: auto;
        overflow: visible;
    }

    /* Remove the left offset on small screens */
    .split-layout.split .content-column {
        margin-left: 0;
    }

}

/* ------------------------------------ */
/* 1. General design */ 
/* ------------------------------------ */

@font-face {
    font-family: 'Blur Bold';
    src: url('fonts/Blur Bold.otf') format('opentype');
}

/* Strong override: ensure the object-detail layout never vertically centers
   its main content. This targets the object container and immediate content
   children with high specificity to override accidental centering from other
   styles or third-party CSS. */
#object-container, #object-container #content-display, #object-container .content-column {
    align-items: flex-start !important;
    justify-content: flex-start !important;
}

@font-face {
    font-family: 'Blur Medium';
    src: url('fonts/Blur Medium.otf') format('opentype');
}

@font-face {
    font-family: 'Blur Regular';
    src: url('fonts/Blur Regular.ttf') format('truetype');
}

@font-face {
    font-family: 'Blur Light';
    src: url('fonts/Blur Light.ttf') format('truetype');
}

@font-face {
    font-family: 'Lekton-Regular';
    src: url('fonts/Lekton-Regular.ttf') format('truetype');
}

/* Fixed site brand in top-left */
.site-brand{
    position:fixed;
    top:12px;
    left:14px;
    z-index:3000;
    font-family: 'Blur Light', sans-serif;
    font-size:50px;
    line-height:1;
    color:#000;
    pointer-events:none; /* non-interactive */
    text-transform:none;
    letter-spacing:0.5px;
}
@media (max-width:520px){ .site-brand{ font-size:34px; left:10px; top:8px; } }



